\ProvidesPackage{paper}

% --- 1. Fonts and Encoding ---
\usepackage[utf8]{inputenc}
\usepackage[table,xcdraw]{xcolor}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage[T1]{fontenc}
\usepackage{newpxtext}
\usepackage{newpxmath}
\usepackage{microtype}
\usepackage{enumitem}

% --- 2. Page Layout ---
\usepackage[margin=1in]{geometry}
\usepackage{setspace}
\onehalfspacing
\usepackage[flushmargin, hang]{footmisc}

% --- 3. Headers and Footers ---
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[C]{\thepage}

% --- 4. Title and Authors ---
\usepackage{titling}
\pretitle{\centering\Large\bfseries}
\posttitle{\par\vskip 1em}

\usepackage[noblocks]{authblk}
\renewcommand\Authfont{\large}
\renewcommand\Affilfont{\normalsize\itshape}
\setlength{\affilsep}{1em}

% --- 5. Section Headings ---
\usepackage{titlesec}

% Section: Centered, Large, Bold
\titleformat{\section}
  {\centering\Large\bfseries}
  {\thesection.}
  {1em}
  {}

% Subsection: Left-aligned, Bold
\titleformat{\subsection}
  {\large\bfseries}
  {\thesubsection}
  {1em}
  {}

% --- 6. Abstract ---
\usepackage{abstract}
\renewcommand{\abstractname}{}
\renewcommand{\absnamepos}{empty}

% --- 7. Tables and Figures ---
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{threeparttable} 
\usepackage{etoolbox}

\usepackage{caption}
\usepackage{subcaption}

\AtBeginEnvironment{table}{\small\centering}
\AtBeginEnvironment{tablenotes}{\footnotesize}

\DeclareCaptionLabelFormat{smallcaps}{\small\textsc{#1}~#2}
\captionsetup{
    labelformat=smallcaps,
    labelsep=period,
    labelfont=sc,
    justification=centering
}
\captionsetup[table]{position=top}
\captionsetup[figure]{position=bottom}

% --- 8. Bibliography ---
\usepackage[backend=biber, style=apa, sorting=nyt]{biblatex}
\newcommand{\posscite}[1]{\citeauthor{#1}'s (\citeyear{#1})}
\addbibresource{library.bib}

% --- 9. Hyperlinks ---
\usepackage{hyperref}
\hypersetup{
    hidelinks,
    colorlinks=false,
    pdftitle={Academic Manuscript Template}
}
